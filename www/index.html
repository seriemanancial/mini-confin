<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta name="google" value="notranslate">
	<meta name="robots" content="index, follow">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="jquery.js"></script>
</head>

<body>

<script>
	var operacao = "+";
	var diaAtual = new Date().getDate();
	var mesAtual = new Date().getMonth();
	var anoAtual = new Date().getFullYear();

	var meses = 'Jan,Fev,Mar,Abr,Mai,Jun,Jul,Ago,Set,Out,Nov,Dez'.split(',');
	var diaMeses = '31,29,31,30,31,30,31,31,30,31,30,31'.split(',');
</script>

<style>

	body {
		font-family:verdana, arial;
		font-size:18px;
	}
	
	table {
		width:100%;
		border:1px #eee solid;
		font-family:verdana, arial;
		margin-bottom:5px;
	}	
	table td {
		background-color:#eee;
		
	}
	
	table td input, button, file, select {
		width:100%;
		height:30px;
		font-size:18px;
	}	
	table td textarea {
		height:40px;
	}	
</style>
				
<table>
	<td>Mini Controle Financeiro Pessoal</td>
</table>

<table id="tbContas">
	<tr>
		<td>Item</td>
		<td>Desc</td>
		<td>Valor</td>
		<td>Data</td>
		<td>Tipo</td>
		<td>Edit</td>
		<td>Del</td>
	</tr>
	<tbody id="linhas">
	</tbody>
		<tr>
			<td colspan="2" style="text-align:right;color:green;"><span id="entrada"></span></td>
			<td colspan="2" style="text-align:center;color:red;"><span id="saida"></span></td>
			<td colspan="3" style="text-align:right;"><span id="saldo"></span><a name=final></a></td>
		</tr>
</table>


<div style="text-align:center;" id=semLanca>
<table><td>
<h1>Sem lançamentos<br>no período!</h1>
</td></table>
</div>

<form name=fluxo>
<table>

	<td width=60% onclick="fluxo.nome.value='';" align=left>Descrição
	<input type="text" name="nome" id="nome" onKeyPress="if (event.keyCode==13)$('#valor').focus();">
	</td>

		<td width=40% align=left onclick="fluxo.valor.value='';">Valor
	<input type="number" name="valor" id="valor" pattern="\d*" onKeyPress="if (event.keyCode==13 && fluxo.valor.value>0){addConta();$('#valor').focus();}">
	</td>
	
</table>
<table>

	<td width=23% align=left>Dia
		<select id=dia>
			<script>
			lista='';
			for (i=1;i<=31;i++) {
				lista +='<option value="'+i+'" '+(i==diaAtual?'selected':'')+'>'+i+'</option>';
			}
			document.write(lista);
			</script>
		</select>
	</td>
	
	<td width=23% align=left>Mês
		<select id=mes onchange="popularTabela();">
			<script>
			var lista='';
			for (i=0;i<meses.length;i++) {
				lista +='<option value="'+(i)+'" '+(i==mesAtual?'selected':'')+'>'+meses[i]+'</option>';
			}
			document.write(lista);
			</script>
		</select>
	</td>
	
	<td width=23% align=left>Ano
		<select id=ano onchange="popularTabela();">
			<script>
			var lista='';
			for (i=anoAtual-1;i<=anoAtual+3;i++) {
				lista +='<option value="'+(i)+'" '+(i==anoAtual?'selected':'')+'>'+i+'</option>';
			}
			document.write(lista);
			</script>
		</select>
	</td>
	
	<td width=16%><br>
	<input type="button" value="(+)" name="entrada" style="color:green;" onclick="operacao='+';if(fluxo.valor.value>0){addConta();$('#valor').focus();}" />
	</td>

	<td width=15%><br>
	<input type="button" value="(-)" name="saida" style="color:red;" onclick="operacao='-';if(fluxo.valor.value>0){addConta();$('#valor').focus();}" />
	</td>
	
</table>

<table style="margin-bottom:0px;">

	<td width=33%>
		<input type="button" value="Importar" onclick="if(confirm('Isso irá apagar os registros atuais e importar os registros do arquivo confin.txt. Continuar?'))readFile('confin.txt');" />
	</td>
	
	<td width=33%>
		<input type="button" value="Resetar" onclick="limpar();" />
	</td>
	
	<td width=33%>
		<input type="button" value="Exportar" onclick="writeFile(utf8_to_b64(localStorage.getItem('contasDB')),'confin.txt');" />
	</td>
</table>
</form>

<script src="functions.js"></script>
<script src="cordova.js"></script>

<script>
function openExternal(elem) { window.open(elem.href, "_system"); return false; }
function fShare (shareMsg) { window.plugins.socialsharing.share(shareMsg,"App X",null,null) }
function fWhatsApp (shareMsg) {  window.plugins.socialsharing.shareViaWhatsApp(shareMsg, null, null, function() {console.log('share ok')}, function(errormsg){alert(errormsg);}); }

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    console.log(cordova.file);
}

</script>

</body>
</html>

